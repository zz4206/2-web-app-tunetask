{% extends "layout.html" %}

{% block title %}{{ user }}'s Profile{% endblock %}

{% block content %}
    <section>
        <h1>{{ user }}'s TuneTasks</h1>
        
        {% if collection %}
            {% for tunetask in collection %}
            <section class="tunetask">
                <article>
                    <h2>{{ tunetask['title'] }}</h2>
                    
                    <h3>Task List</h3>
                    {% if tunetask['task_list'] %}
                        <ul>
                            {% for task in tunetask['task_list'] %}
                            <li>{{ task }}</li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p>No tasks in this list.</p>
                    {% endif %}
                    
                    <h3>Playlist</h3>
                    {% if tunetask['play_list'] %}
                        <ul>
                            {% for song in tunetask['play_list'] %}
                            <li>{{ song }}</li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p>No songs in this playlist.</p>
                    {% endif %}
                </article>
                <form action="/profile/{{user}}/delete/{{tunetask['_id']}}" method="POST">
                    <!-- <input type="text" value="name">Enter name -->
                    <!-- <button type="button">Delete this tunetask -->
                    <button type="submit">Delete this tunetask</button>
                </form>
            </section>
            {% endfor %}
        {% else %}
            <p>No TuneTasks found for {{ user }}. <a href="{{ url_for('new_task', user=user) }}">Create your first TuneTask</a>!</p>
        {% endif %}
    </section>
{% endblock %}
